{
  "_format": "hh-sol-artifact-1",
  "contractName": "OmniPaySubscription",
  "sourceName": "contracts/OmniPaySubscription.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_notifier",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "previousOwner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "OwnershipTransferred",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "subscriber",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "merchant",
          "type": "address"
        }
      ],
      "name": "SubscriptionCancelled",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "subscriber",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "merchant",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "token",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "interval",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "nextPaymentDue",
          "type": "uint256"
        }
      ],
      "name": "SubscriptionCreated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "subscriber",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "merchant",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "token",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "nextPaymentDue",
          "type": "uint256"
        }
      ],
      "name": "SubscriptionExecuted",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        }
      ],
      "name": "cancelSubscription",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "merchant",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "token",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "intervalSeconds",
          "type": "uint256"
        }
      ],
      "name": "createSubscription",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        }
      ],
      "name": "executeSubscription",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "nextId",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "notifier",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "renounceOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_notifier",
          "type": "address"
        }
      ],
      "name": "setNotifier",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "subscriptions",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "subscriber",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "merchant",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "token",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "interval",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "nextPaymentDue",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "active",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x6080604052600160025534801561001557600080fd5b50604051611090380380611090833981016040819052610034916100b6565b61003d33610066565b60018055600480546001600160a01b0319166001600160a01b03929092169190911790556100e6565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000602082840312156100c857600080fd5b81516001600160a01b03811681146100df57600080fd5b9392505050565b610f9b806100f56000396000f3fe6080604052600436106100915760003560e01c80638da5cb5b116100595780638da5cb5b146101ec5780638de8b9001461020a578063abbb46951461022a578063e89036561461024a578063f2fde38b1461025d57600080fd5b806309276ea41461009657806321235083146100d35780632d5bbf60146100f557806361b8ce8c146101b3578063715018a6146101d7575b600080fd5b3480156100a257600080fd5b506004546100b6906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b3480156100df57600080fd5b506100f36100ee366004610def565b61027d565b005b34801561010157600080fd5b50610167610110366004610def565b60036020819052600091825260409091208054600182015460028301549383015460048401546005850154600686015460079096015494966001600160a01b03948516969085169594909316939192909160ff1688565b604080519889526001600160a01b0397881660208a015295871695880195909552949092166060860152608085015260a084015260c0830191909152151560e0820152610100016100ca565b3480156101bf57600080fd5b506101c960025481565b6040519081526020016100ca565b3480156101e357600080fd5b506100f36103fb565b3480156101f857600080fd5b506000546001600160a01b03166100b6565b34801561021657600080fd5b506101c9610225366004610e24565b61040f565b34801561023657600080fd5b506100f3610245366004610e66565b610649565b6100f3610258366004610def565b610673565b34801561026957600080fd5b506100f3610278366004610e66565b6109b1565b6000818152600360205260409020600781015460ff166102d75760405162461bcd60e51b815260206004820152601060248201526f416c726561647920696e61637469766560801b60448201526064015b60405180910390fd5b60018101546001600160a01b031633146103255760405162461bcd60e51b815260206004820152600f60248201526e27b7363c9039bab139b1b934b132b960891b60448201526064016102ce565b60078101805460ff19169055600281015460018201546040516001600160a01b03928316929091169084907f8b143fab101681a84d31f59bde0822fdc5f999c709e0f1e85b0916c6ddc5bc5990600090a46004546001600160a01b0316156103f7576004805460018301546002840154604051636b7ce08160e01b81529384018690526001600160a01b039182166024850152811660448401521690636b7ce08190606401600060405180830381600087803b1580156103e457600080fd5b505af19250505080156103f5575060015b505b5050565b610403610a27565b61040d6000610a81565b565b60006001600160a01b03851661045a5760405162461bcd60e51b815260206004820152601060248201526f125b9d985b1a59081b595c98da185b9d60821b60448201526064016102ce565b600083116104975760405162461bcd60e51b815260206004820152600a6024820152690416d6f756e74203d20360b41b60448201526064016102ce565b603c8210156104dd5760405162461bcd60e51b8152602060048201526012602482015271125b9d195c9d985b081d1bdbc81cda1bdc9d60721b60448201526064016102ce565b600280549060006104ed83610e9e565b919050559050604051806101000160405280828152602001336001600160a01b03168152602001866001600160a01b03168152602001856001600160a01b03168152602001848152602001838152602001834261054a9190610eb7565b81526001602091820181905260008481526003808452604091829020855181558585015193810180546001600160a01b03199081166001600160a01b03968716179091558684015160028301805483169187169190911790556060808801519383018054909216938616939093179055608080870151600483015560a0870151600583015560c08701516006830181905560e0909701516007909201805460ff19169215159290921790915582518a85168152948501899052918401879052830193909352871691339184917f3a1d21bece43c85b5a9afdb7ec13187791f0d64dec190a38b6fb0ea242cf49bf910160405180910390a4949350505050565b610651610a27565b600480546001600160a01b0319166001600160a01b0392909216919091179055565b61067b610ad1565b6000818152600360205260409020600781015460ff166106c85760405162461bcd60e51b8152602060048201526008602482015267496e61637469766560c01b60448201526064016102ce565b60018101546001600160a01b031633146107165760405162461bcd60e51b815260206004820152600f60248201526e27b7363c9039bab139b1b934b132b960891b60448201526064016102ce565b80600601544210156107545760405162461bcd60e51b81526020600482015260076024820152664e6f742064756560c81b60448201526064016102ce565b60038101546001600160a01b031661085557806004015434146107b05760405162461bcd60e51b8152602060048201526014602482015273125b98dbdc9c9958dd0811551208185b5bdd5b9d60621b60448201526064016102ce565b600281015460048201546040516000926001600160a01b031691908381818185875af1925050503d8060008114610803576040519150601f19603f3d011682016040523d82523d6000602084013e610808565b606091505b505090508061084f5760405162461bcd60e51b8152602060048201526013602482015272115512081d1c985b9cd9995c8819985a5b1959606a1b60448201526064016102ce565b50610885565b6001810154600282015460048301546003840154610885936001600160a01b039182169390821692911690610b2a565b60058101546108949042610eb7565b600682018190556002820154600183015460038401546004850154604080516001600160a01b03938416815260208101929092528101949094529182169291169084907f382da987c537ddd3bb60966d3607c14100d418d0fe9102d36803f333d69208509060600160405180910390a46004546001600160a01b0316156109a457600480546001830154600284015460038501548585015460068701546040516205e18160e11b81529687018990526001600160a01b03948516602488015292841660448701529083166064860152608485015260a48401521690620bc3029060c401600060405180830381600087803b15801561099157600080fd5b505af19250505080156109a2575060015b505b506109ae60018055565b50565b6109b9610a27565b6001600160a01b038116610a1e5760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b60648201526084016102ce565b6109ae81610a81565b6000546001600160a01b0316331461040d5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016102ce565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b600260015403610b235760405162461bcd60e51b815260206004820152601f60248201527f5265656e7472616e637947756172643a207265656e7472616e742063616c6c0060448201526064016102ce565b6002600155565b604080516001600160a01b0385811660248301528416604482015260648082018490528251808303909101815260849091019091526020810180516001600160e01b03166323b872dd60e01b179052610b84908590610b8a565b50505050565b6000610bdf826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b0316610c5f9092919063ffffffff16565b9050805160001480610c00575080806020019051810190610c009190610ed0565b6103f55760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b60648201526084016102ce565b6060610c6e8484600085610c76565b949350505050565b606082471015610cd75760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b60648201526084016102ce565b600080866001600160a01b03168587604051610cf39190610f16565b60006040518083038185875af1925050503d8060008114610d30576040519150601f19603f3d011682016040523d82523d6000602084013e610d35565b606091505b5091509150610d4687838387610d51565b979650505050505050565b60608315610dc0578251600003610db9576001600160a01b0385163b610db95760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e747261637400000060448201526064016102ce565b5081610c6e565b610c6e8383815115610dd55781518083602001fd5b8060405162461bcd60e51b81526004016102ce9190610f32565b600060208284031215610e0157600080fd5b5035919050565b80356001600160a01b0381168114610e1f57600080fd5b919050565b60008060008060808587031215610e3a57600080fd5b610e4385610e08565b9350610e5160208601610e08565b93969395505050506040820135916060013590565b600060208284031215610e7857600080fd5b610e8182610e08565b9392505050565b634e487b7160e01b600052601160045260246000fd5b600060018201610eb057610eb0610e88565b5060010190565b80820180821115610eca57610eca610e88565b92915050565b600060208284031215610ee257600080fd5b81518015158114610e8157600080fd5b60005b83811015610f0d578181015183820152602001610ef5565b50506000910152565b60008251610f28818460208701610ef2565b9190910192915050565b6020815260008251806020840152610f51816040850160208701610ef2565b601f01601f1916919091016040019291505056fea26469706673582212202ad7fec13c0c1980ae02d8a4485d7736b42561745a14e1dd098178d2f23ed7b164736f6c63430008140033",
  "deployedBytecode": "0x6080604052600436106100915760003560e01c80638da5cb5b116100595780638da5cb5b146101ec5780638de8b9001461020a578063abbb46951461022a578063e89036561461024a578063f2fde38b1461025d57600080fd5b806309276ea41461009657806321235083146100d35780632d5bbf60146100f557806361b8ce8c146101b3578063715018a6146101d7575b600080fd5b3480156100a257600080fd5b506004546100b6906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b3480156100df57600080fd5b506100f36100ee366004610def565b61027d565b005b34801561010157600080fd5b50610167610110366004610def565b60036020819052600091825260409091208054600182015460028301549383015460048401546005850154600686015460079096015494966001600160a01b03948516969085169594909316939192909160ff1688565b604080519889526001600160a01b0397881660208a015295871695880195909552949092166060860152608085015260a084015260c0830191909152151560e0820152610100016100ca565b3480156101bf57600080fd5b506101c960025481565b6040519081526020016100ca565b3480156101e357600080fd5b506100f36103fb565b3480156101f857600080fd5b506000546001600160a01b03166100b6565b34801561021657600080fd5b506101c9610225366004610e24565b61040f565b34801561023657600080fd5b506100f3610245366004610e66565b610649565b6100f3610258366004610def565b610673565b34801561026957600080fd5b506100f3610278366004610e66565b6109b1565b6000818152600360205260409020600781015460ff166102d75760405162461bcd60e51b815260206004820152601060248201526f416c726561647920696e61637469766560801b60448201526064015b60405180910390fd5b60018101546001600160a01b031633146103255760405162461bcd60e51b815260206004820152600f60248201526e27b7363c9039bab139b1b934b132b960891b60448201526064016102ce565b60078101805460ff19169055600281015460018201546040516001600160a01b03928316929091169084907f8b143fab101681a84d31f59bde0822fdc5f999c709e0f1e85b0916c6ddc5bc5990600090a46004546001600160a01b0316156103f7576004805460018301546002840154604051636b7ce08160e01b81529384018690526001600160a01b039182166024850152811660448401521690636b7ce08190606401600060405180830381600087803b1580156103e457600080fd5b505af19250505080156103f5575060015b505b5050565b610403610a27565b61040d6000610a81565b565b60006001600160a01b03851661045a5760405162461bcd60e51b815260206004820152601060248201526f125b9d985b1a59081b595c98da185b9d60821b60448201526064016102ce565b600083116104975760405162461bcd60e51b815260206004820152600a6024820152690416d6f756e74203d20360b41b60448201526064016102ce565b603c8210156104dd5760405162461bcd60e51b8152602060048201526012602482015271125b9d195c9d985b081d1bdbc81cda1bdc9d60721b60448201526064016102ce565b600280549060006104ed83610e9e565b919050559050604051806101000160405280828152602001336001600160a01b03168152602001866001600160a01b03168152602001856001600160a01b03168152602001848152602001838152602001834261054a9190610eb7565b81526001602091820181905260008481526003808452604091829020855181558585015193810180546001600160a01b03199081166001600160a01b03968716179091558684015160028301805483169187169190911790556060808801519383018054909216938616939093179055608080870151600483015560a0870151600583015560c08701516006830181905560e0909701516007909201805460ff19169215159290921790915582518a85168152948501899052918401879052830193909352871691339184917f3a1d21bece43c85b5a9afdb7ec13187791f0d64dec190a38b6fb0ea242cf49bf910160405180910390a4949350505050565b610651610a27565b600480546001600160a01b0319166001600160a01b0392909216919091179055565b61067b610ad1565b6000818152600360205260409020600781015460ff166106c85760405162461bcd60e51b8152602060048201526008602482015267496e61637469766560c01b60448201526064016102ce565b60018101546001600160a01b031633146107165760405162461bcd60e51b815260206004820152600f60248201526e27b7363c9039bab139b1b934b132b960891b60448201526064016102ce565b80600601544210156107545760405162461bcd60e51b81526020600482015260076024820152664e6f742064756560c81b60448201526064016102ce565b60038101546001600160a01b031661085557806004015434146107b05760405162461bcd60e51b8152602060048201526014602482015273125b98dbdc9c9958dd0811551208185b5bdd5b9d60621b60448201526064016102ce565b600281015460048201546040516000926001600160a01b031691908381818185875af1925050503d8060008114610803576040519150601f19603f3d011682016040523d82523d6000602084013e610808565b606091505b505090508061084f5760405162461bcd60e51b8152602060048201526013602482015272115512081d1c985b9cd9995c8819985a5b1959606a1b60448201526064016102ce565b50610885565b6001810154600282015460048301546003840154610885936001600160a01b039182169390821692911690610b2a565b60058101546108949042610eb7565b600682018190556002820154600183015460038401546004850154604080516001600160a01b03938416815260208101929092528101949094529182169291169084907f382da987c537ddd3bb60966d3607c14100d418d0fe9102d36803f333d69208509060600160405180910390a46004546001600160a01b0316156109a457600480546001830154600284015460038501548585015460068701546040516205e18160e11b81529687018990526001600160a01b03948516602488015292841660448701529083166064860152608485015260a48401521690620bc3029060c401600060405180830381600087803b15801561099157600080fd5b505af19250505080156109a2575060015b505b506109ae60018055565b50565b6109b9610a27565b6001600160a01b038116610a1e5760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b60648201526084016102ce565b6109ae81610a81565b6000546001600160a01b0316331461040d5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016102ce565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b600260015403610b235760405162461bcd60e51b815260206004820152601f60248201527f5265656e7472616e637947756172643a207265656e7472616e742063616c6c0060448201526064016102ce565b6002600155565b604080516001600160a01b0385811660248301528416604482015260648082018490528251808303909101815260849091019091526020810180516001600160e01b03166323b872dd60e01b179052610b84908590610b8a565b50505050565b6000610bdf826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b0316610c5f9092919063ffffffff16565b9050805160001480610c00575080806020019051810190610c009190610ed0565b6103f55760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b60648201526084016102ce565b6060610c6e8484600085610c76565b949350505050565b606082471015610cd75760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f6044820152651c8818d85b1b60d21b60648201526084016102ce565b600080866001600160a01b03168587604051610cf39190610f16565b60006040518083038185875af1925050503d8060008114610d30576040519150601f19603f3d011682016040523d82523d6000602084013e610d35565b606091505b5091509150610d4687838387610d51565b979650505050505050565b60608315610dc0578251600003610db9576001600160a01b0385163b610db95760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e747261637400000060448201526064016102ce565b5081610c6e565b610c6e8383815115610dd55781518083602001fd5b8060405162461bcd60e51b81526004016102ce9190610f32565b600060208284031215610e0157600080fd5b5035919050565b80356001600160a01b0381168114610e1f57600080fd5b919050565b60008060008060808587031215610e3a57600080fd5b610e4385610e08565b9350610e5160208601610e08565b93969395505050506040820135916060013590565b600060208284031215610e7857600080fd5b610e8182610e08565b9392505050565b634e487b7160e01b600052601160045260246000fd5b600060018201610eb057610eb0610e88565b5060010190565b80820180821115610eca57610eca610e88565b92915050565b600060208284031215610ee257600080fd5b81518015158114610e8157600080fd5b60005b83811015610f0d578181015183820152602001610ef5565b50506000910152565b60008251610f28818460208701610ef2565b9190910192915050565b6020815260008251806020840152610f51816040850160208701610ef2565b601f01601f1916919091016040019291505056fea26469706673582212202ad7fec13c0c1980ae02d8a4485d7736b42561745a14e1dd098178d2f23ed7b164736f6c63430008140033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
